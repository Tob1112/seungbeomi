<?xml version="1.0"?>
<project name="setupDB" basedir="." default="all">
	<property file="build.properties" />

	<target name="hsql-drop">
		<echo message="Drop tables using: ${db.driver} ${db.url}" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.user}" password="${db.pw}" onerror="continue">
			<classpath>
				<fileset dir="${lib.dir}">
					<include name="hsqldb*.jar" />
				</fileset>
			</classpath>
			<transaction src="${sql.dir}/drop.sql" />
		</sql>
	</target>

	<target name="hsql-create">
		<echo message="Create tables using: ${db.driver} ${db.url}" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.user}" password="${db.pw}" onerror="continue">
			<classpath>
				<fileset dir="${lib.dir}">
					<include name="hsqldb*.jar" />
				</fileset>
			</classpath>
			<transaction src="${sql.dir}/create.sql" />
		</sql>
	</target>

	<!--
	<target name="dropMYSQLTables" if="useMYSQL">
		<echo message="Dropping tables using: ${db.driver} ${db.url}" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.user}" password="${db.pw}" onerror="continue">
			<classpath>
				<fileset dir="${sql.dir}/mysql">
					<include name="mysql*.jar" />
				</fileset>
			</classpath>
			<transaction src="${sql.dir}/dropTables.txt" />
		</sql>
	</target>

	<target name="createMYSQLTables" if="useMYSQL">
		<echo message="Creating tables using: ${db.driver} ${db.url}" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.user}" password="${db.pw}" onerror="continue">
			<classpath>
				<fileset dir="${sql.dir}/mysql">
					<include name="mysql*.jar" />
				</fileset>
			</classpath>
			<transaction src="${sql.dir}/mysql/initDB.txt" />
		</sql>
	</target>
	-->

	<target name="hsql-delete">
		<echo message="Emptying tables using: ${db.driver} ${db.url}" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.user}" password="${db.pw}">
			<classpath>
				<fileset dir="${lib.dir}">
					<include name="hsqldb*.jar" />
				</fileset>
				<!--
				<fileset dir="${sql.dir}/mysql">
					<include name="mysql*.jar" />
				</fileset>
				-->
			</classpath>
			<transaction src="${sql.dir}/delete.sql" />
		</sql>
	</target>

	<target name="hsql-insert">
		<echo message="Populating tables using: ${db.driver} ${db.url}" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.user}" password="${db.pw}">
			<classpath>
				<fileset dir="${lib.dir}">
					<include name="hsqldb*.jar" />
				</fileset>
				<!--
				<fileset dir="${sql.dir}/mysql">
					<include name="mysql*.jar" />
				</fileset>
				-->
			</classpath>
			<transaction src="${sql.dir}/insert.sql" />
		</sql>
	</target>

	<!--<target name="all" depends="dropHSQLTables,createHSQLTables,dropMYSQLTables,createMYSQLTables,emptyTables,populateTables" />-->
	<target name="all" depends="hsql-drop,hsql-create,hsql-delete,hsql-insert" />

</project>