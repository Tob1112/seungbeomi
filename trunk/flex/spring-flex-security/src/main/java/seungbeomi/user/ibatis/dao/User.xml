<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="user">

	<resultMap id="result" class="seungbeomi.user.model.User">
		<result property="userId" column="USER_ID" />
		<result property="password" column="PASSWORD" />
		<result property="name" column="NAME" />
		<result property="email" column="EMAIL" />
		<result property="groupId" column="GROUP_ID"/>
	</resultMap>

	<typeAlias alias="user" type="seungbeomi.user.model.User"/>

	<select id="findUserByUserId" parameterClass="string" resultMap="result">
		SELECT *
		FROM   userinfo
		WHERE  user_id = #userId#
	</select>

	<select id="findUsers" resultMap="result">
		SELECT *
		FROM userinfo
    </select>

	<select id="findUsersByName" parameterClass="string" resultMap="result">
		SELECT *
		FROM userinfo
		WHERE name = #name#
    </select>

	<insert id="createUser" parameterClass="user">
		INSERT INTO userinfo
		VALUES
			(#userId#, #password#, #name#, #email#, #groupId#)
	</insert>

    <update id="updateUser" parameterClass="user">
    	UPDATE USERINFO
    	SET
    		PASSWORD = #password#,
    		NAME = #name#,
    		EMAIL = #email#,
    		GROUPID = #groupId#
    	WHERE
    		USER_ID = #userId#
    </update>

    <delete id="deleteUser" parameterClass="string">
    	DELETE FROM userinfo
    	WHERE  user_id = #userId#
    </delete>

    <select id="findByUserIdAndPassword" parameterClass="user" resultClass="user">
    	SELECT *
    	FROM   userinfo
    	WHERE  user_id = #userId#
    		AND password = #password#
    </select>

</sqlMap>
